# Teaンリュウ（川柳）- 簡単セットアップ版 🍵

## 📦 ファイル構成

- `senryu_simple.html` - メインページ（川柳投稿・表示）
- `senryu_api.php` - バックエンドAPI
- `senryu_data.json` - データ保存ファイル（自動作成されます）

## 🚀 セットアップ（3ステップ、3分で完了）

### ステップ1: ファイルをサーバーにアップロード

以下の2ファイルを同じディレクトリにアップロード：

```bash
# 例: chaba-ba.jpn.org にアップロードする場合
scp senryu_simple.html user@chaba-ba.jpn.org:/var/www/html/
scp senryu_api.php user@chaba-ba.jpn.org:/var/www/html/
```

または、FTPソフト（FileZilla等）でアップロード

### ステップ2: 書き込み権限を設定

サーバーにSSHで接続して、PHPがファイルを作成できるように権限を設定：

```bash
chmod 666 /var/www/html/senryu_api.php
chmod 777 /var/www/html/  # ディレクトリに書き込み権限
```

### ステップ3: ブラウザでアクセス

```
https://chaba-ba.jpn.org/senryu_simple.html
```

以上！これだけで使えます。

## ✨ 主な機能

- ✅ **リアルタイム更新**: 3秒ごとに自動で新しい川柳を取得
- ✅ **いいね機能**: 各川柳にいいねができる（重複防止付き）
- ✅ **ログイン不要**: 誰でもすぐに投稿・閲覧可能
- ✅ **スマホ対応**: レスポンシブデザイン
- ✅ **設定不要**: Firebase等の外部サービス不要

## 📱 使い方

### 投稿方法
1. 名前を入力（ニックネームOK）
2. 川柳を入力（五・七・五）
3. 「投稿する」ボタンをクリック

### いいね方法
1. 気に入った川柳の「👍 いいね」ボタンをクリック
2. 同じ川柳に重複していいねはできません（ブラウザで記録）

### リアルタイム反映
- 誰かが投稿すると、3秒以内に全員の画面に表示されます
- いいね数も自動で更新されます

## 🎯 イベント当日の準備

### 1. URLのQRコード作成
- https://www.qrcode-monkey.com/ でQRコード生成
- URL: `https://chaba-ba.jpn.org/senryu_simple.html`

### 2. 会場に掲示
- QRコードを印刷して会場に掲示
- 参加者がスマホで読み取ってアクセス

### 3. 案内文の例
```
📱 Teaンリュウ（川柳）投稿はこちら！

お茶に関する川柳を投稿して、
みんなで楽しみましょう！

QRコードを読み取ってアクセス
⬇️
[QRコード]

ログイン不要・すぐに投稿できます
```

## 🔧 トラブルシューティング

### 投稿できない場合
- PHPファイルの権限を確認: `chmod 666 senryu_api.php`
- ディレクトリの権限を確認: `chmod 777 /var/www/html/`
- ブラウザのコンソール（F12）でエラーを確認

### データが消えた場合
- `senryu_data.json` が削除されていないか確認
- バックアップを取っておくことを推奨

### リアルタイム更新されない場合
- インターネット接続を確認
- ページをリフレッシュ（F5キー）
- ブラウザのキャッシュをクリア

## 📊 データの確認・管理

### 投稿データの確認
サーバー上の `senryu_data.json` を開くと、全ての投稿が見れます：

```bash
cat /var/www/html/senryu_data.json
```

### データのバックアップ
```bash
cp senryu_data.json senryu_data_backup_$(date +%Y%m%d).json
```

### データのリセット
```bash
echo "[]" > senryu_data.json
```

## 🔒 セキュリティについて

### イベント後の対応
イベント終了後は、投稿を停止するために以下を実施：

1. **投稿を無効化する**（閲覧のみ可能にする）
   - `senryu_api.php` の POST部分をコメントアウト

2. **ファイルを削除する**
   ```bash
   rm senryu_api.php
   ```

3. **読み取り専用にする**
   ```bash
   chmod 444 senryu_data.json
   ```

## 💡 カスタマイズ

### デザインの変更
- `senryu_simple.html` の `<style>` セクションを編集
- 茶Bar のカラー（#4a5d23）を変更可能

### 更新頻度の変更
- `senryu_simple.html` の最後の方：
  ```javascript
  setInterval(fetchSenryus, 3000);  // 3000 = 3秒
  ```
  - 1000 = 1秒、5000 = 5秒に変更可能

### 投稿フォームの項目追加
- 例：「お題」フィールドを追加
- HTMLとPHP両方を編集する必要あり

## 📝 まとめ

1. ✅ ファイル2つをアップロード
2. ✅ 権限を設定
3. ✅ URLにアクセス

これだけで、リアルタイム川柳投稿サイトの完成です！

---

質問があればいつでもどうぞ！🍵
